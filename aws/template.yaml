AWSTemplateFormatVersion: '2010-09-09'\nTransform: AWS::Serverless-2016-10-31\nDescription: Text Moderator Serverless Application\n\nGlobals:\n  Function:\n    Timeout: 30\n    MemorySize: 512\n    Runtime: python3.9\n\nParameters:\n  HuggingFaceToken:\n    Type: String\n    Description: HuggingFace API Token\n    NoEcho: true\n\nResources:\n  TextModeratorFunction:\n    Type: AWS::Serverless::Function\n    Properties:\n      CodeUri: ../\n      Handler: aws.lambda_function.lambda_handler\n      Environment:\n        Variables:\n          HUGGINGFACE_TOKEN: !Ref HuggingFaceToken\n      Events:\n        Root:\n          Type: Api\n          Properties:\n            Path: /\n            Method: get\n        API:\n          Type: Api\n          Properties:\n            Path: /api/{proxy+}\n            Method: any\n        Static:\n          Type: Api\n          Properties:\n            Path: /{proxy+}\n            Method: any\n\n  # S3 bucket for static assets (if needed)\n  StaticAssetsBucket:\n    Type: AWS::S3::Bucket\n    Properties:\n      BucketName: !Sub \"${AWS::StackName}-static-assets\"\n      PublicReadPolicy: true\n      WebsiteConfiguration:\n        IndexDocument: index.html\n        ErrorDocument: error.html\n\nOutputs:\n  TextModeratorApi:\n    Description: \"API Gateway endpoint URL\"\n    Value: !Sub \"https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/\"\n  \n  StaticAssetsUrl:\n    Description: \"S3 bucket website URL\"\n    Value: !GetAtt StaticAssetsBucket.WebsiteURL\n