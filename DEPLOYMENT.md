# üöÄ AWS Deployment Guide\n\nThis guide will help you deploy Text Moderator to AWS using serverless architecture.\n\n## üìã Prerequisites\n\n### 1. AWS Account Setup\n- Create an AWS account at [aws.amazon.com](https://aws.amazon.com)\n- Note your AWS region (e.g., `us-east-1`)\n\n### 2. Install Required Tools\n\n**AWS CLI:**\n```bash\n# macOS\nbrew install awscli\n\n# Windows\nchoco install awscli\n\n# Linux\ncurl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\"\nunzip awscliv2.zip\nsudo ./aws/install\n```\n\n**AWS SAM CLI:**\n```bash\n# macOS\nbrew install aws-sam-cli\n\n# Windows\nchoco install aws-sam-cli\n\n# Linux - follow AWS docs\n```\n\n### 3. Configure AWS Credentials\n```bash\naws configure\n# Enter your:\n# - AWS Access Key ID\n# - AWS Secret Access Key\n# - Default region (e.g., us-east-1)\n# - Default output format: json\n```\n\n### 4. Get HuggingFace Token\n1. Go to [HuggingFace Settings](https://huggingface.co/settings/tokens)\n2. Create a new token with \"Read\" permissions\n3. Copy the token (starts with `hf_`)\n\n## üöÄ Deployment Options\n\n### Option 1: Automated Deployment (Recommended)\n\n```bash\n# Make deployment script executable\nchmod +x deploy.sh\n\n# Set your HuggingFace token\nexport HUGGINGFACE_TOKEN=\"your_token_here\"\n\n# Run deployment\n./deploy.sh\n```\n\n### Option 2: Manual Deployment\n\n1. **Build the application:**\n   ```bash\n   sam build -t aws/template.yaml\n   ```\n\n2. **Deploy to AWS:**\n   ```bash\n   sam deploy --guided --parameter-overrides HuggingFaceToken=\"your_token_here\" --capabilities CAPABILITY_IAM\n   ```\n\n3. **Follow the prompts:**\n   - Stack name: `text-moderator`\n   - AWS Region: `us-east-1` (or your preferred region)\n   - Confirm changes before deploy: `Y`\n   - Allow SAM to create IAM roles: `Y`\n   - Save parameters to samconfig.toml: `Y`\n\n## üåê Post-Deployment\n\n### 1. Get Your URL\nAfter deployment, AWS will provide your API Gateway URL:\n```\nhttps://abc123def.execute-api.us-east-1.amazonaws.com/Prod/\n```\n\n### 2. Test Your Deployment\n1. Open the URL in your browser\n2. Try analyzing some text\n3. Verify the dark theme and privacy notice appear\n\n### 3. Monitor Your Application\n- **CloudWatch Logs**: Monitor function execution\n- **API Gateway Metrics**: Track request volume\n- **Lambda Metrics**: Monitor performance\n\n## üí∞ Cost Estimation\n\n**AWS Free Tier (First 12 months):**\n- 1M Lambda requests/month: **FREE**\n- 1M API Gateway requests/month: **FREE**\n\n**After Free Tier:**\n- Lambda: ~$0.20 per 1M requests\n- API Gateway: ~$3.50 per 1M requests\n- **Total for 10K requests/month: ~$0.04**\n\n## üîß Configuration\n\n### Environment Variables\nUpdate in AWS Lambda console:\n- `HUGGINGFACE_TOKEN`: Your API token\n\n### Rate Limiting\nCurrent settings:\n- 20 requests per hour per IP\n- Modify in `backend/app.py` if needed\n\n## üõ†Ô∏è Troubleshooting\n\n### Common Issues\n\n**1. \"Invalid HuggingFace Token\"**\n- Verify token is correct and has \"Read\" permissions\n- Update Lambda environment variables\n\n**2. \"Rate Limit Exceeded\"**\n- Check HuggingFace API usage\n- Consider upgrading HuggingFace plan\n\n**3. \"Cold Start Timeouts\"**\n- Increase Lambda timeout in template.yaml\n- Consider provisioned concurrency for production\n\n**4. \"CORS Errors\"**\n- Verify API Gateway CORS settings\n- Check frontend-backend communication\n\n### Debugging\n\n**View Logs:**\n```bash\nsam logs -n TextModeratorFunction --stack-name text-moderator --tail\n```\n\n**Local Testing:**\n```bash\nsam local start-api -t aws/template.yaml\n```\n\n## üîÑ Updates\n\n### Deploying Changes\n```bash\n# After making code changes\nsam build -t aws/template.yaml\nsam deploy\n```\n\n### Rolling Back\n```bash\n# Delete the stack\naws cloudformation delete-stack --stack-name text-moderator\n```\n\n## üîí Security Best Practices\n\n1. **API Keys**: Never commit tokens to git\n2. **IAM Roles**: Use least-privilege principle\n3. **HTTPS**: Always use HTTPS endpoints\n4. **Monitoring**: Set up CloudWatch alarms\n5. **Rate Limiting**: Monitor and adjust as needed\n\n## üìû Support\n\nIf you encounter issues:\n1. Check AWS CloudWatch logs\n2. Verify all prerequisites are met\n3. Test locally with `sam local start-api`\n4. Open a GitHub issue with error details\n\n---\n\n**üéâ Congratulations! Your Text Moderator is now running on AWS!**\n